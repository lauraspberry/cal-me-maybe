{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { API, graphqlOperation } from 'aws-amplify';\nimport * as queries from \"../graphql/queries\";\nimport * as mutations from \"../graphql/mutations\";\nimport * as subscriptions from \"../graphql/subscriptions\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsmobile from \"../aws-exports\";\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsmobile), {}, {\n  Analytics: {\n    disabled: true\n  }\n}));\n\nvar Friend = function (_React$Component) {\n  _inherits(Friend, _React$Component);\n\n  var _super = _createSuper(Friend);\n\n  function Friend() {\n    var _this;\n\n    _classCallCheck(this, Friend);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      friends: [],\n      input: \"\",\n      nickname: \"\",\n      valid: [],\n      pass: false,\n      userPresent: false,\n      email: \"\"\n    };\n\n    _this.verifyID = function _callee(userInput) {\n      var i;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              for (i = 0; i < _this.state.valid.length; i += 1) {\n                console.log(userInput, _this.state.valid[i].name);\n\n                if (userInput == _this.state.valid[i].name) {\n                  _this.setState({\n                    pass: true\n                  });\n                }\n              }\n\n              console.log(_this.state.pass);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getFriendsList = function _callee2() {\n      var response;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(queries.listFriends)));\n\n            case 3:\n              response = _context2.sent;\n\n              _this.setState({\n                friends: response.data.listFriends.items\n              });\n\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    _this.addFriend = function _callee3() {\n      var response, userId;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(_this.verifyID(_this.state.input));\n\n            case 2:\n              if (!_this.state.pass) {\n                _context3.next = 21;\n                break;\n              }\n\n              _context3.prev = 3;\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(Auth.currentUserInfo());\n\n            case 6:\n              response = _context3.sent;\n              userId = response.username;\n              console.log(_this.state.input, _this.state.nickname, userId);\n              _context3.next = 11;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(mutations.createFriend, {\n                input: {\n                  username: _this.state.input,\n                  nickname: _this.state.nickname,\n                  email: _this.state.email,\n                  selfPostsId: userId\n                }\n              })));\n\n            case 11:\n              console.log(\"passed\");\n\n              _this.setState({\n                input: \"\",\n                nickname: \"\",\n                email: \"\",\n                pass: false\n              });\n\n              _this.getFriendsList();\n\n              _context3.next = 19;\n              break;\n\n            case 16:\n              _context3.prev = 16;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.error(_context3.t0);\n\n            case 19:\n              _context3.next = 22;\n              break;\n\n            case 21:\n              console.log(\"ID does not exist!\");\n\n            case 22:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, [[3, 16]], Promise);\n    };\n\n    _this.deleteFriend = function _callee4(id) {\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(mutations.deleteFriend, {\n                input: {\n                  id: id\n                }\n              })));\n\n            case 3:\n              _this.getFriendsList();\n\n              _context4.next = 9;\n              break;\n\n            case 6:\n              _context4.prev = 6;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.error(_context4.t0);\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, [[0, 6]], Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(Friend, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var response, userId, selfData, allData;\n      return _regeneratorRuntime.async(function componentDidMount$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(Auth.currentUserInfo());\n\n            case 2:\n              response = _context5.sent;\n              userId = response.username;\n              console.log(userId);\n              _context5.next = 7;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(queries.listFriends, {\n                filter: {\n                  selfPostsId: {\n                    eq: userId\n                  }\n                }\n              })));\n\n            case 7:\n              selfData = _context5.sent;\n              console.log(\"componentDidMount\");\n              _context5.next = 11;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(queries.listSelves)));\n\n            case 11:\n              allData = _context5.sent;\n              this.setState({\n                friends: selfData.data.listFriends.items,\n                valid: allData.data.listSelves.items\n              });\n              console.log(this.state.valid);\n\n            case 14:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(TextInput, {\n          style: styles.input,\n          value: this.state.input,\n          placeholder: \"Type your friend's id!\",\n          onChangeText: function onChangeText(text) {\n            return _this2.setState({\n              input: text\n            });\n          }\n        }), _jsx(TextInput, {\n          style: styles.input,\n          value: this.state.email,\n          placeholder: \"Type your friend's email!\",\n          onChangeText: function onChangeText(text) {\n            return _this2.setState({\n              email: text\n            });\n          }\n        }), _jsx(TextInput, {\n          style: styles.input,\n          value: this.state.nickname,\n          placeholder: \"Type your friend's name!\",\n          onChangeText: function onChangeText(text) {\n            return _this2.setState({\n              nickname: text\n            });\n          }\n        }), _jsx(Button, {\n          title: \"Add Friend\",\n          onPress: this.addFriend\n        }), _jsx(Text, {\n          style: styles.item,\n          children: _jsx(Text, {\n            style: styles.heading,\n            children: \"List of Friends:\"\n          })\n        }), _jsx(FlatList, {\n          data: this.state.friends,\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return _jsxs(View, {\n              children: [_jsxs(Text, {\n                style: styles.item,\n                children: [_jsx(Text, {\n                  style: {\n                    fontWeight: \"bold\"\n                  },\n                  children: \"Name: \"\n                }), _jsxs(Text, {\n                  children: [item.nickname, \"    \"]\n                })]\n              }), _jsx(Button, {\n                title: \"Delete Friend\",\n                color: \"#ffa500\",\n                onPress: function onPress() {\n                  return _this2.deleteFriend(item.id);\n                }\n              })]\n            });\n          }\n        })]\n      });\n    }\n  }]);\n\n  return Friend;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    paddingTop: 22,\n    marginLeft: 20,\n    marginRight: 20\n  },\n  item: {\n    padding: 10,\n    fontSize: 18,\n    height: 44\n  },\n  input: {\n    height: 40,\n    borderWidth: 1,\n    padding: 10\n  },\n  heading: {\n    fontSize: 30,\n    height: 66,\n    fontWeight: \"bold\"\n  }\n});\nexport default withAuthenticator(Friend, {\n  includeGreeetings: false\n});","map":{"version":3,"sources":["/Users/studypei/Files/Code/CalMeMaybe copy/src/screens/Friends.js"],"names":["React","API","graphqlOperation","queries","mutations","subscriptions","Amplify","Auth","awsmobile","withAuthenticator","ConsoleLogger","configure","Analytics","disabled","Friend","state","friends","input","nickname","valid","pass","userPresent","email","verifyID","userInput","i","length","console","log","name","setState","getFriendsList","graphql","listFriends","response","data","items","error","addFriend","currentUserInfo","userId","username","createFriend","selfPostsId","deleteFriend","id","filter","eq","selfData","listSelves","allData","styles","container","text","item","heading","fontWeight","Component","StyleSheet","create","flex","paddingTop","marginLeft","marginRight","padding","fontSize","height","borderWidth","includeGreeetings"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, Text, SafeAreaView, View, FlatList, TextInput, Button } from 'react-native';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport * as queries from \"../graphql/queries\";\nimport * as mutations from \"../graphql/mutations\";\nimport * as subscriptions from \"../graphql/subscriptions\";\n\n\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsmobile from '../aws-exports';\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport { ConsoleLogger } from '@aws-amplify/core';\n\n\nAmplify.configure({\n    ...awsmobile,\n    Analytics: {\n      disabled: true,\n    },\n});\n\nclass Friend extends React.Component {\n    state = { friends: [], input: \"\", nickname: \"\", valid: [], pass: false, userPresent: false, email: \"\"}\n\n    verifyID = async(userInput) => {\n        for(let i = 0; i < this.state.valid.length; i += 1){\n            console.log(userInput, this.state.valid[i].name)\n            if (userInput == this.state.valid[i].name) {\n                this.setState({pass: true})\n            }\n        }\n        console.log(this.state.pass)\n    }\n\n    async componentDidMount() {\n        const response = await Auth.currentUserInfo()\n        const userId = response.username\n        console.log(userId)\n        const selfData = await API.graphql(graphqlOperation(queries.listFriends, { filter: {selfPostsId: {eq: userId}} }))\n        console.log(\"componentDidMount\")\n        const allData = await API.graphql(graphqlOperation(queries.listSelves))\n        this.setState({ friends: selfData.data.listFriends.items, valid: allData.data.listSelves.items })\n        console.log(this.state.valid)\n    }\n\n    getFriendsList = async () => {\n        try {\n            const response = await API.graphql(graphqlOperation(queries.listFriends))\n            this.setState({ friends: response.data.listFriends.items })\n        } catch (err) {\n            console.error(err);\n        }\n    }\n\n    addFriend = async () => {\n        await this.verifyID(this.state.input)\n        if (this.state.pass) {\n            try {\n                const response = await Auth.currentUserInfo()\n                const userId = response.username\n                console.log(this.state.input, this.state.nickname, userId)\n                await API.graphql(graphqlOperation(mutations.createFriend, \n                    { input: {username: this.state.input, nickname: this.state.nickname, email: this.state.email, selfPostsId: userId}}))\n                console.log(\"passed\")\n                this.setState({ input: \"\", nickname: \"\", email: \"\", pass: false})\n                this.getFriendsList()\n            } catch (err) {\n                console.error(err);\n            }\n        } else {\n            console.log(\"ID does not exist!\")\n\n        }\n        \n    }\n\n    deleteFriend = async (id) => {\n        try {\n            await API.graphql(graphqlOperation(mutations.deleteFriend, { input: { id: id} }))\n            this.getFriendsList()\n        } catch (err) {\n            console.error(err);\n        }\n    }\n\n\n    render() {\n\n        return (\n            <View style={styles.container}>\n                <TextInput\n                    style={styles.input}\n                    value={this.state.input}\n                    placeholder=\"Type your friend's id!\"\n                    onChangeText={(text) => this.setState({ input: text })}\n                />\n                <TextInput\n                    style={styles.input}\n                    value={this.state.email}\n                    placeholder=\"Type your friend's email!\"\n                    onChangeText={(text) => this.setState({ email: text })}\n                />\n                <TextInput\n                    style = {styles.input}\n                    value = {this.state.nickname}\n                    placeholder= \"Type your friend's name!\"\n                    onChangeText = {(text) => this.setState({ nickname: text })}\n                />\n                <Button title=\"Add Friend\" onPress={this.addFriend} />\n                <Text style = {styles.item}>\n                    <Text style = {styles.heading}>List of Friends:</Text>\n                </Text>\n                <FlatList\n                    data={this.state.friends}\n                    renderItem={({ item }) => (\n                        <View>\n                            <Text style={styles.item}>\n                                <Text style = {{fontWeight: \"bold\"}}>Name: </Text>\n                                <Text>{item.nickname}    </Text>\n                            </Text>\n                            <Button title=\"Delete Friend\" color=\"#ffa500\" onPress={() => this.deleteFriend(item.id)} />\n                        </View>\n\n                    )}\n                />\n            </View>\n        )\n\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        paddingTop: 22,\n        marginLeft: 20,\n        marginRight: 20,\n    },\n    item: {\n        padding: 10,\n        fontSize: 18,\n        height: 44,\n    },\n    input: {\n        height: 40,\n        borderWidth:1,\n        padding: 10,\n    },\n    heading: {\n        fontSize: 30,\n        height: 66,\n        fontWeight: \"bold\",\n    },\n})\n\n\nexport default withAuthenticator(Friend, { includeGreeetings: false})"]},"metadata":{},"sourceType":"module"}