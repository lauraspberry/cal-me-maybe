{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { API, graphqlOperation } from 'aws-amplify';\nimport * as queries from \"../graphql/queries\";\nimport * as mutations from \"../graphql/mutations\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsmobile from \"../aws-exports\";\nimport { withAuthenticator } from 'aws-amplify-react-native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsmobile), {}, {\n  Analytics: {\n    disabled: true\n  }\n}));\n\nvar HomeScreen = function (_React$Component) {\n  _inherits(HomeScreen, _React$Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen() {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      valid: [],\n      userPresent: false\n    };\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var response, userId, allData, i;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Auth.currentUserInfo());\n\n            case 2:\n              response = _context.sent;\n              userId = response.username.replace(\"\\n\", \"\");\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(queries.listSelves, {\n                filter: {\n                  name: {\n                    eq: userId\n                  }\n                }\n              })));\n\n            case 6:\n              allData = _context.sent;\n              this.setState({\n                valid: allData.data.listSelves.items\n              });\n\n              for (i = 0; i < this.state.valid.length; i += 1) {\n                if (userId == this.state.valid[i].name) {\n                  this.setState({\n                    userPresent: true\n                  });\n                }\n              }\n\n              if (!(this.state.userPresent == false)) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.prev = 10;\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(API.graphql(graphqlOperation(mutations.createSelf, {\n                input: {\n                  name: userId\n                }\n              })));\n\n            case 13:\n              _context.next = 17;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](10);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[10, 15]], Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsx(View, {\n        style: styles.container,\n        children: _jsx(Text, {\n          children: \" Welcome to Cal Me Maybe!! \"\n        })\n      });\n    }\n  }]);\n\n  return HomeScreen;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default withAuthenticator(HomeScreen, {\n  includeGreeetings: false\n});","map":{"version":3,"sources":["/Users/studypei/Files/Code/CalMeMaybe copy/src/screens/Home.js"],"names":["React","API","graphqlOperation","queries","mutations","Amplify","Auth","awsmobile","withAuthenticator","configure","Analytics","disabled","HomeScreen","state","valid","userPresent","currentUserInfo","response","userId","username","replace","graphql","listSelves","filter","name","eq","allData","setState","data","items","i","length","createSelf","input","styles","container","Component","StyleSheet","create","flex","alignItems","justifyContent","includeGreeetings"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;AAEA,SAASC,GAAT,EAAcC,gBAAd,QAAsC,aAAtC;AACA,OAAO,KAAKC,OAAZ;AACA,OAAO,KAAKC,SAAZ;AAGA,OAAOC,OAAP,IAAkBC,IAAlB,QAA8B,aAA9B;AACA,OAAOC,SAAP;AACA,SAASC,iBAAT,QAAkC,0BAAlC;;AAGAH,OAAO,CAACI,SAAR,iCACOF,SADP;AAEIG,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD;AAFf;;IAOMC,U;;;;;;;;;;;;;;;UACFC,K,GAAQ;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,WAAW,EAAE;AAA1B,K;;;;;;WAER;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAC2BT,IAAI,CAACU,eAAL,EAD3B;;AAAA;AACUC,cAAAA,QADV;AAGUC,cAAAA,MAHV,GAGmBD,QAAQ,CAACE,QAAT,CAAkBC,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAHnB;AAAA;AAAA,+CAK0BnB,GAAG,CAACoB,OAAJ,CAAYnB,gBAAgB,CAACC,OAAO,CAACmB,UAAT,EAAqB;AAACC,gBAAAA,MAAM,EAAE;AAACC,kBAAAA,IAAI,EAAE;AAACC,oBAAAA,EAAE,EAAEP;AAAL;AAAP;AAAT,eAArB,CAA5B,CAL1B;;AAAA;AAKUQ,cAAAA,OALV;AAMI,mBAAKC,QAAL,CAAc;AAAEb,gBAAAA,KAAK,EAAEY,OAAO,CAACE,IAAR,CAAaN,UAAb,CAAwBO;AAAjC,eAAd;;AAEA,mBAAQC,CAAR,GAAY,CAAZ,EAAeA,CAAC,GAAG,KAAKjB,KAAL,CAAWC,KAAX,CAAiBiB,MAApC,EAA4CD,CAAC,IAAI,CAAjD,EAAmD;AAC/C,oBAAIZ,MAAM,IAAI,KAAKL,KAAL,CAAWC,KAAX,CAAiBgB,CAAjB,EAAoBN,IAAlC,EAAwC;AACpC,uBAAKG,QAAL,CAAc;AAACZ,oBAAAA,WAAW,EAAE;AAAd,mBAAd;AACH;AACJ;;AAZL,oBAcO,KAAKF,KAAL,CAAWE,WAAX,IAA0B,KAdjC;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,+CAmCkBd,GAAG,CAACoB,OAAJ,CAAYnB,gBAAgB,CAACE,SAAS,CAAC4B,UAAX,EAAuB;AAACC,gBAAAA,KAAK,EAAE;AAACT,kBAAAA,IAAI,EAAEN;AAAP;AAAR,eAAvB,CAA5B,CAnClB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;WAyCA,kBAAS;AAEL,aACI,KAAC,IAAD;AAAM,QAAA,KAAK,EAAEgB,MAAM,CAACC,SAApB;AAAA,kBACI,KAAC,IAAD;AAAA;AAAA;AADJ,QADJ;AAMH;;;;EApDoBnC,KAAK,CAACoC,S;;AAuD/B,IAAMF,MAAM,GAAGG,UAAU,CAACC,MAAX,CAAkB;AAC7BH,EAAAA,SAAS,EAAE;AACPI,IAAAA,IAAI,EAAE,CADC;AAEPC,IAAAA,UAAU,EAAE,QAFL;AAGPC,IAAAA,cAAc,EAAE;AAHT;AADkB,CAAlB,CAAf;AASA,eAAejC,iBAAiB,CAACI,UAAD,EAAa;AAAE8B,EAAAA,iBAAiB,EAAE;AAArB,CAAb,CAAhC","sourcesContent":["import React from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport * as queries from \"../graphql/queries\";\nimport * as mutations from \"../graphql/mutations\";\n\n\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsmobile from '../aws-exports';\nimport { withAuthenticator } from 'aws-amplify-react-native';\n\n\nAmplify.configure({\n    ...awsmobile,\n    Analytics: {\n      disabled: true,\n    },\n});\n\nclass HomeScreen extends React.Component {\n    state = { valid: [], userPresent: false}\n\n    async componentDidMount() {\n        const response = await Auth.currentUserInfo()\n        //console.log(response)\n        const userId = response.username.replace(\"\\n\", \"\")\n        //console.log(userId)\n        const allData = await API.graphql(graphqlOperation(queries.listSelves, {filter: {name: {eq: userId}}}))\n        this.setState({ valid: allData.data.listSelves.items })\n        //console.log(this.state.valid)\n        for(let i = 0; i < this.state.valid.length; i += 1){\n            if (userId == this.state.valid[i].name) {\n                this.setState({userPresent: true})\n            }\n        }\n        //console.log(this.state.userPresent)\n        if(this.state.userPresent == false) {\n            try {   \n/*                 const {status: existingStatus} = await Notifications.getPermissionsAsync();\n                let finalStatus = existingStatus;\n                if (existingStatus !== 'granted') {\n                    const { status } = await Notifications.requestPermissionsAsync();\n                    finalStatus = status;\n                }\n                if (finalStatus !== 'granted') {\n                    alert('Failed to get push token for push notification!');\n                    return;\n                }\n                const token = (await Notifications.getExpoPushTokenAsync()).data;\n                if (Platform.OS === 'android') {\n                    Notifications.setNotificationChannelAsync('default', {\n                        name: 'default',\n                        importance: Notifications.AndroidImportance.MAX,\n                        vibrationPattern: [0, 250, 250, 250],\n                        lightColor: '#FF231F7C',\n                    });\n                } */\n                await API.graphql(graphqlOperation(mutations.createSelf, {input: {name: userId}}))\n            } catch(err) {\n            }\n        }\n    }\n\n    render() {\n\n        return (\n            <View style={styles.container}>\n                <Text> Welcome to Cal Me Maybe!! </Text>\n            </View>\n        )\n\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n})\n\n\nexport default withAuthenticator(HomeScreen, { includeGreeetings: false})"]},"metadata":{},"sourceType":"module"}